# GPG + GIT на Windows

Простой способ установить **GPG** ключ на **Windows** и сунуть его в **GIT**

### Примечание:

Этот гайд рассчитан на то, что вы уже знаете, что такое **GPG** ключ и для чего он нужен, но не хотите много думать.

Все команды выполняются в **CMD**. Я не знаю, как команды поведут себя в **PowerShell**, но в теории, всё будет работать так же.

### Требования:

- Прямые руки
- Умение гуглить
- Windows 10/11

# Установка

## 1 - Установка GIT и GPG:

> Скачиваем **GIT**: https://git-scm.com/download/win
>
> Скачиваем **GPG**: https://gpg4win.org/thanks-for-download.html

> Если вы установили их ранее, можете пропустить этот шаг

### При установке GPG вам предложат установить компоненты.

Поскольку нам нужен лишь **GIT**, оставляем только **GnuPG**.

После установки проверим версии:

```bash
git --version
```

```bash
gpg --version
```

Это нужно чтобы убедиться в том, что всё установленно.

## 2 - Генерируем ключ:

Вводим:

```bash
gpg --full-generate-key
```

Выбираем: `(1) RSA and RSA (default)`

### Далее: вопрос про размер ключа.

> Гиту нужно минимум 4096 бит.

- Вводим: `4096`

### Далее: срок действия ключа.

Вводим столько, сколько вам нужно.

- Чтобы срок действия не истекал, вводим: `0`

**Подтверждаем!**

### Далее: настраиваем личность.

**Имя - ваш ник...** (Ну или любой другое, если хотите. Просто работать не будет...)

**А вот с почтой не всё так просто!**

> [!TIP]  
> Если вы генерируете ключ для работы с **GitHub**:  
> 1 - Открываем `Settings > Email` вашего профиля  
> 2 - Проверяем, включена ли функция: `Keep my email addresses private`  
> Если **включена**, вводим почту из её описания.  
> Если **выключена**, вводим ту, которую используете.  

> [!TIP]  
> Если вы генерируете ключ для работы с **GitLab**:  
> **GitLab** потребует подтверждение почты.  
> Следовательно, почта ключа, должна быть привязана к **GitLab**.

Почта должна быть активной и вашей!

**Подтверждаем!**

### Далее: пароль.

Особых требований нет. **Главное, запомните его!!!**

### Всё?

После, вы получите информацию о публичном сгенерированном ключе.

Проверим, правильно ли всё, с помощью команды:

```bash
gpg --list-secret-keys --keyid-format LONG
```

Ну и отобразим ключ: (signingkey - строка после [SC])

```bash
gpg --armor --export signingkey
```

### Конец.

Вводим ключ, куда вам там надо. Я использую **GitHub**, он его сразу проглотил.

## 3 - Настроим GIT

> Я настраиваю всё глобально, потому что мне так надо!

### Задаём имя и почту:

```bash
git config --global user.name "Radio"
```

```bash
git config --global user.email private.radio.email@mail.com
```

> Вы ведь поняли, что `Radio` и `private.radio.email@mail.com`, это данные для примера?

### Настраиваем сам ключ:

Вводим по очереди: (signingkey - тот-же что и был ранее)

```bash
git config --global user.signingkey signingkey
```

```bash
git config --global commit.gpgsign true
```

```bash
git config --global gpg.program "C:\Program Files (x86)\GnuPG\bin\gpg.exe"
```

> `C:\Program Files (x86)\GnuPG\bin\gpg.exe` - это путь GnuPG по умолчанию!
>
> Если вы его меняли или ставили отельно (например: портативную версию), путь будет отличаться!

# Дополнительно

Команда экспорта открытого ключа (username@email - почта, на которую генерировался ключ):

```bash
gpg --output public.pgp --armor --export username@email
```

Команда экспорта секретного ключа:

```bash
gpg --output private.pgp --armor --export-secret-key username@email
```
