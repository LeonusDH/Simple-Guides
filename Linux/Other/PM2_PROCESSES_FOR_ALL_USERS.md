# Делаем так, чтобы все процессы **PM2** были видны всем пользователям **Linux (Debian/Ubuntu)**

> [!NOTE]  
> Можно настроить и для некоторых пользователей

### Требования:

- Прямые руки
- Умение гуглить

# Подготовка

## Создаём группу пользователей

> `pm2` - название группы (может быть любым, но я буду использовать это)

```bash
sudo groupadd pm2
```

## Добавим нужных пользователей в эту группу

> `pm2` - название группы.

> `username` - имя пользователя, которого добавляем в группу.

```bash
sudo usermod -a -G pm2 username
```

## Создадим папку

> [!TIP]
> В этой папке **PM2 Daemon** будет создавать все нужные файлы и добавлять **PID** процессов.  
> Поскольку у юзеров будет доступ к этой папке, они смогут увидеть эти процессы.

> `pm2daemon` - название папки.

```bash
cd /etc && mkdir pm2daemon
```

## Настраиваем права на созданную папку

> `pm2` - название группы.

> `pm2daemon` - название папки.

### Привязываем папку к группе:

```bash
sudo chgrp -R pm2 /etc/pm2daemon
```

### Применяем нужные права на папку:

```bash
sudo chmod -R 770 /etc/pm2daemon
```

## Сделаем так, чтобы группа каталога владела всеми файлами

> Это нужно, чтобы у пользователей не возникали ошибки прав!

```bash
sudo chmod g+s /etc/pm2daemon
```

# К главному

> [!WARNING]  
> Если у вас уже запущенные какие-то процессы, или установлен **startup** - закройте все процессы и уберите **startup**!  
> Если вы этого не сделаете, сделать это позже, будет весьма проблематично (особенно, если вы просто повторяете команды, не вникая в суть)

## Установим переменную

### Открываем файл глобальных переменных:

```bash
sudo nano /etc/environment
```

### Добавляем саму переменную:

> `PM2_HOME` - название переменной (не меняйте его...)

> `/etc/pm2daemon` - прямой путь до нашей папки.

```bash
PM2_HOME=/etc/pm2daemon
```

**Сохранить не забудьте!**

## Перезапускаем Linux

```bash
sudo reboot
```

# Всё готово

> [!NOTE]  
> Можете снова запускать свои процессы и ставить их в **startup**